:root{
  --bg-1:#0e1014;        /* noche */
  --bg-2:#12151b;
  --paper:#fffaf3;       /* papel c√°lido */
  --ink:#1c1c1c;
  --accent:#8aa0ff;      /* azul tenue */
  --muted:#7b7b7b;
  --shadow:rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  color:#f6f7fb;
  background: radial-gradient(1200px 800px at 60% -10%, var(--bg-2), var(--bg-1));
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}

.stage{min-height:100vh; display:grid; place-items:center; position:relative; overflow:hidden}

/* Cielo + grano */
.sky { position:absolute; inset:0; z-index:0; pointer-events:none; }
#stars { position:absolute; inset:0; width:100%; height:100%; display:block; }
.grain{
  position:absolute; inset:0; mix-blend-mode:overlay; opacity:.35;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.06'/%3E%3C/svg%3E");
}

/* Contenido */
.card-wrap{position:relative; z-index:1; display:grid; place-items:center; gap:1rem; padding:2rem}

.open-btn{
  appearance:none; border:none; cursor:pointer;
  background:linear-gradient(180deg,#ffffff,#f0f3ff);
  color:#1a1f36; font-weight:600; padding:.9rem 1.1rem; border-radius:12px;
  box-shadow:0 8px 24px var(--shadow);
  transition:transform .15s ease, box-shadow .2s ease;
}
.open-btn:hover{transform:translateY(-1px); box-shadow:0 12px 28px var(--shadow)}
.open-btn:active{transform:translateY(0)}

.hint{color:#cfd6ff; opacity:.7; font-size:.95rem; text-align:center}

/* Sobre + Carta */
.envelope{
  position:relative; width:min(92vw,680px); height:420px;
  perspective:1200px;
  will-change: transform;
  transition: transform .12s ease-out;
  transform-style: preserve-3d;
}
.pocket, .flap{
  position:absolute; inset:0; border-radius:14px; backface-visibility:hidden;
}
.pocket{
  background:linear-gradient(180deg,#e9edff,#dfe5ff);
  box-shadow:0 18px 50px rgba(0,0,0,.45), inset 0 0 0 1px rgba(0,0,0,.08);
}
.flap{
  transform-origin:top center;
  transform:rotateX(0deg);
  background:linear-gradient(180deg,#dfe5ff,#c9d4ff);
  clip-path:polygon(0 0, 100% 0, 50% 60%);
  transition:transform .7s cubic-bezier(.2,.8,.2,1);
  box-shadow:0 18px 50px rgba(0,0,0,.45);
}

/* Hoja de carta */
.letter{
  position:absolute; left:50%; top:58%;
  transform:translate(-50%,-50%) translateY(120px) rotateX(2deg);
  width:min(88vw,600px); max-height:360px; overflow:auto;
  background:var(--paper); color:var(--ink);
  border-radius:12px; padding:28px 26px;
  box-shadow:0 30px 60px rgba(0,0,0,.45), inset 0 0 0 1px rgba(0,0,0,.06);
  opacity:0; transition:opacity .5s ease, transform .7s cubic-bezier(.2,.8,.2,1);
}
.letter:focus{outline:2px dashed #8aa0ff; outline-offset:4px}

.letter__header h1{
  font-family: Cardo, Georgia, serif;
  font-weight:400; margin:0 0 .25rem 0; color:#0f1220;
}
.muted{color:var(--muted); margin:0 0 1rem 0; font-size:.95rem}
.letter__body{line-height:1.7; font-size:1.05rem; white-space:pre-wrap}
.letter__footer{margin-top:1.25rem; display:flex; justify-content:flex-end}

.controls{display:flex; gap:.5rem; flex-wrap:wrap}
.ghost-btn{
  appearance:none; cursor:pointer; border:1px solid #d7d7d7; background:#fff; color:#111;
  padding:.55rem .75rem; border-radius:10px; font-size:.95rem;
  transition:background .15s ease, transform .1s ease, border-color .15s ease;
}
.ghost-btn:hover{background:#f7f7f7}
.ghost-btn:active{transform:translateY(1px)}

/* States */
.envelope.open .flap{ transform:rotateX(-165deg) }
.envelope.open .letter{
  opacity:1; transform:translate(-50%,-50%) translateY(-30px) rotateX(0deg);
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  .envelope{ transition:none !important; transform:none !important; }
  .flap{ transition:none !important; }
  .letter{ transition:none !important; }
}
